<script>
    $(document).ready(function(){
        $('[data-toggle="tooltip"]').tooltip();
    });
</script>

<div class="row row-centered-lg">
    <div class="row row-centered col-xs-12 col-sm-10">
        <div class="step col-xs-11 col-sm-8">
            <div class="step-body">
                <div class="meta row">
                    <div class="title text-center">
                        We can fight your ticket!
                    </div>
                    <div class="space-top-2">
                        Our Smart Match algorithm was able to match you with one of the top traffic attorneys in
                        {{vm.session.model.citation.court.location}}
                    </div>

                    <!-- Refund Eligibility -->
                    <div class="row space-top-3">
                        <div class="col-xs-12" style="border-top: 1px solid; border-top-color: lightgray;padding-top:10px;">
                            <div class="row row-condensed">
                                <div class="col-xs-8 text-left match-screen-label">
                                    <label class="otr-18" style="padding-bottom: 0px;">
                                        Eligible for a refund
                                        <!--<i class="icon icon-question" data-toggle="tooltip" title="Based on historical performance"></i>-->
                                    </label>
                                    <div ng-show="vm.session.model.refundEligibility.isEligible" class="otr-14 light text-lima">{{vm.session.model.refundEligibility.uiReasonMsg}}</div>
                                    <div ng-show="!vm.session.model.refundEligibility.isEligible" class="note">{{vm.session.model.refundEligibility.uiReasonMsg}}</div>
                                </div>
                                <div ng-show="vm.session.model.refundEligibility.isEligible"
                                     class="col-xs-4 text-right otr-18 bold text-lima">
                                    <label>{{vm.session.model.refundEligibility.isEligible | yesNo}}</label>
                                </div>
                                <div ng-show="!vm.session.model.refundEligibility.isEligible"
                                     class="col-xs-4 text-right otr-18 bold text-rausch">
                                    <label>{{vm.session.model.refundEligibility.isEligible | yesNo}}</label>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Chance of success -->
                    <div class="row space-top-2">
                        <div class="col-xs-12" class="border-top-gray">
                            <div class="row row-condensed">
                                <div class="col-xs-8 text-left match-screen-label">
                                    <label class="otr-18" style="padding-bottom: 0px;">
                                        Your chance of success
                                        <!--<i class="icon icon-question" data-toggle="tooltip" title="Based on historical performance"></i>-->
                                    </label>
                                    <div class="note">Based on historical performance</div>
                                </div>
                                <div class="col-xs-4 text-right otr-18 bold text-lima">
                                    <label>{{ vm.session.model.case.chanceOfSuccess }}%</label>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Your cost -->
                    <div class="row space-top-2">
                        <div class="col-xs-12" class="border-top-gray">
                            <div class="row row-condensed">
                                <div class="col-xs-8 text-left match-screen-label">
                                    <label class="otr-18" style="padding-bottom: 0px;">
                                        Your cost
                                    </label>
                                    <div class="note">This includes your legal fee and all service charges</div>
                                </div>
                                <div class="col-xs-4 text-right your-cost otr-18 bold">
                                    <label>{{ vm.session.model.case.estimatedCost | intToCurrency }}</label>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Cost of not fighting -->
                    <div class="row space-top-2">
                        <div class="col-xs-12" class="border-top-gray">
                            <div class="row row-condensed">
                                <div class="col-xs-8 text-left match-screen-label">
                                    <label class="otr-18" style="padding-bottom: 0px;">
                                        Cost of not fighting this ticket
                                    </label>
                                    <div class="note" ng-show="vm.session.model.citation.fineAmount == null">
                                        Based on average insurance premium increases
                                    </div>
                                    <div class="note" ng-show="vm.session.model.citation.fineAmount != null">
                                        Based on your ticket fine + average insurance premium increases
                                    </div>
                                </div>
                                <div class="col-xs-4 text-right otr-18 bold text-rausch"
                                     ng-show="vm.session.model.citation.fineAmount == null">
                                    <label style="padding-bottom: 0px;margin-bottom: 0px;">{{vm.session.model.case.insuranceCostInCents | intToCurrency}}</label>
                                    <div style="color: #565a5c;font-weight: normal;font-size: 16px;">+ ticket fine</div>
                                </div>
                                <div class="col-xs-4 text-right otr-18 bold text-rausch"
                                     ng-show="vm.session.model.citation.fineAmount != null">
                                    <label>{{ (vm.session.model.case.insuranceCostInCents + vm.session.model.citation.fineAmount) | intToCurrency }}</label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- What's Included? -->
        <div class="right-col whats-included col-xs-11 col-sm-4" style="margin-top: 5px;">
            <h4>
                What's Included?
            </h4>
            <ul>
                <li>Legal services to fight your case in court</li>
                <li>Cancel anytime within 24 hours</li>
                <li>No hidden fees</li>
                <li>Peace of mind. We handle everything from here.</li>
            </ul>

            <!-- Button -->
            <div class="space-top-5 row row-centered-lg" style="text-align:center;">
                <button type="submit" class="col-xs-12 col-sm-10 btn btn-default btn-primary"
                        ng-click="vm.continueToPayment()">
                    <span>Fight My Ticket</span>
                    <i class="fa fa-spinner fa-spin fa-lg" ng-show="vm.dataLoading"></i>
                </button>
                <br>
            </div>
        </div>
    </div>
</div>